!function(a){function b(){return new Date(Date.UTC.apply(Date,arguments))}var c=function(b,c){var f=this;this.element=a(b),this.language=c.language||this.element.data("date-language")||"en",this.language=this.language in d?this.language:"en",this.isRTL=d[this.language].rtl||!1,this.formatType=c.formatType||this.element.data("format-type")||"standard",this.format=e.parseFormat(c.format||this.element.data("date-format")||d[this.language].format||e.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar").parent():!1,this.componentReset=this.element.is(".date")?this.element.find(".add-on .icon-remove").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=c.linkField||this.element.data("link-field")||!1,this.linkFormat=e.parseFormat(c.linkFormat||this.element.data("link-format")||e.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=c.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=c.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=c.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=c.initialDate||new Date,this._attachEvents(),this.formatViewType="datetime","formatViewType"in c?this.formatViewType=c.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in c?this.minView=c.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=e.convertViewMode(this.minView),this.maxView=e.modes.length-1,"maxView"in c?this.maxView=c.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=e.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in c?this.wheelViewModeNavigation=c.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in c?this.wheelViewModeNavigationInverseDirection=c.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in c?this.wheelViewModeNavigationDelay=c.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in c?this.startViewMode=c.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=e.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in c?this.viewSelect=c.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=e.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in c?this.forceParse=c.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=a(e.template).appendTo(this.isInline?this.element:"body").on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(a.fn.mousewheel?this.picker.on({mousewheel:a.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL&&(this.picker.addClass("datetimepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),a(document).on("mousedown",function(b){0===a(b.target).closest(".datetimepicker").length&&f.hide()}),this.autoclose=!1,"autoclose"in c?this.autoclose=c.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in c?this.keyboardNavigation=c.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=c.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=c.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(c.weekStart||this.element.data("date-weekstart")||d[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(c.startDate||this.element.data("date-startdate")),this.setEndDate(c.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(c.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:a.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]];for(var b,c,d=0;d<this._events.length;d++)b=this._events[d][0],c=this._events[d][1],b.on(c)},_detachEvents:function(){for(var a,b,c=0;c<this._events.length;c++)a=this._events[c][0],b=this._events[c][1],a.off(b);this._events=[]},show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(){this.isVisible&&(this.isInline||(this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6e4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6e4*a.getTimezoneOffset()))},setUTCDate:function(a){a>=this.startDate&&a<=this.endDate?(this.date=a,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:a,startDate:this.startDate,endDate:this.endDate})},setFormat:function(a){this.format=e.parseFormat(a,this.formatType);var b;this.isInput?b=this.element:this.component&&(b=this.element.find("input")),b&&b.val()&&this.setValue()},setValue:function(){var b=this.getFormattedDate();this.isInput?this.element.val(b):(this.component&&this.element.find("input").val(b),this.element.data("date",b)),this.linkField&&a("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(a){return void 0==a&&(a=this.format),e.formatDate(this.date,a,this.language,this.formatType)},setStartDate:function(a){this.startDate=a||-1/0,this.startDate!==-1/0&&(this.startDate=e.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(a){this.endDate=a||1/0,1/0!==this.endDate&&(this.endDate=e.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(b){this.daysOfWeekDisabled=b||[],a.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=a.map(this.daysOfWeekDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var b,c,d,e=parseInt(this.element.parents().filter(function(){return"auto"!=a(this).css("z-index")}).first().css("z-index"))+10;this.component?(b=this.component.offset(),d=b.left,("bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)&&(d+=this.component.outerWidth()-this.picker.outerWidth())):(b=this.element.offset(),d=b.left),c="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?b.top-this.picker.outerHeight():b.top+this.height,this.picker.css({top:c,left:d,zIndex:e})}},update:function(){var a,b=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):a=this.element.data("date")||(this.isInput?this.element.val():this.element.find("input").val())||this.initialDate,a||(a=new Date,b=!1),this.date=e.parseDate(a,this.format,this.language,this.formatType),b&&this.setValue(),this.viewDate=this.date<this.startDate?new Date(this.startDate):this.date>this.endDate?new Date(this.endDate):new Date(this.date),this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+d[this.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datetimepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+d[this.language].monthsShort[b++]+"</span>";this.picker.find(".datetimepicker-months td").html(a)},fill:function(){if(null!=this.date&&null!=this.viewDate){var c=new Date(this.viewDate),f=c.getUTCFullYear(),g=c.getUTCMonth(),h=c.getUTCDate(),i=c.getUTCHours(),j=c.getUTCMinutes(),k=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,l=this.startDate!==-1/0?this.startDate.getUTCMonth():-1/0,m=1/0!==this.endDate?this.endDate.getUTCFullYear():1/0,n=1/0!==this.endDate?this.endDate.getUTCMonth():1/0,o=new b(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),p=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(d[this.language].months[g]+" "+f),"time"==this.formatViewType){var q=i%12?i%12:12,r=(10>q?"0":"")+q,s=(10>j?"0":"")+j,t=d[this.language].meridiem[12>i?0:1];this.picker.find(".datetimepicker-hours thead th:eq(1)").text(r+":"+s+" "+t.toUpperCase()),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(r+":"+s+" "+t.toUpperCase())}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(h+" "+d[this.language].months[g]+" "+f),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(h+" "+d[this.language].months[g]+" "+f);this.picker.find("tfoot th.today").text(d[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var u=b(f,g-1,28,0,0,0,0),v=e.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(v),u.setUTCDate(v-(u.getUTCDay()-this.weekStart+7)%7);var w=new Date(u);w.setUTCDate(w.getUTCDate()+42),w=w.valueOf();for(var x,y=[];u.valueOf()<w;)u.getUTCDay()==this.weekStart&&y.push("<tr>"),x="",u.getUTCFullYear()<f||u.getUTCFullYear()==f&&u.getUTCMonth()<g?x+=" old":(u.getUTCFullYear()>f||u.getUTCFullYear()==f&&u.getUTCMonth()>g)&&(x+=" new"),this.todayHighlight&&u.getUTCFullYear()==p.getFullYear()&&u.getUTCMonth()==p.getMonth()&&u.getUTCDate()==p.getDate()&&(x+=" today"),u.valueOf()==o&&(x+=" active"),(u.valueOf()+864e5<=this.startDate||u.valueOf()>this.endDate||-1!==a.inArray(u.getUTCDay(),this.daysOfWeekDisabled))&&(x+=" disabled"),y.push('<td class="day'+x+'">'+u.getUTCDate()+"</td>"),u.getUTCDay()==this.weekEnd&&y.push("</tr>"),u.setUTCDate(u.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(y.join("")),y=[];for(var z="",A="",B="",C=0;24>C;C++){var D=b(f,g,h,C);x="",D.valueOf()+36e5<=this.startDate||D.valueOf()>this.endDate?x+=" disabled":i==C&&(x+=" active"),this.showMeridian&&2==d[this.language].meridiem.length?(A=12>C?d[this.language].meridiem[0]:d[this.language].meridiem[1],A!=B&&(""!=B&&y.push("</fieldset>"),y.push('<fieldset class="hour"><legend>'+A.toUpperCase()+"</legend>")),B=A,z=C%12?C%12:12,y.push('<span class="hour'+x+" hour_"+(12>C?"am":"pm")+'">'+z+"</span>"),23==C&&y.push("</fieldset>")):(z=C+":00",y.push('<span class="hour'+x+'">'+z+"</span>"))}this.picker.find(".datetimepicker-hours td").html(y.join("")),y=[],z="",A="",B="";for(var C=0;60>C;C+=this.minuteStep){var D=b(f,g,h,i,C,0);x="",D.valueOf()<this.startDate||D.valueOf()>this.endDate?x+=" disabled":Math.floor(j/this.minuteStep)==Math.floor(C/this.minuteStep)&&(x+=" active"),this.showMeridian&&2==d[this.language].meridiem.length?(A=12>i?d[this.language].meridiem[0]:d[this.language].meridiem[1],A!=B&&(""!=B&&y.push("</fieldset>"),y.push('<fieldset class="minute"><legend>'+A.toUpperCase()+"</legend>")),B=A,z=i%12?i%12:12,y.push('<span class="minute'+x+'">'+z+":"+(10>C?"0"+C:C)+"</span>"),59==C&&y.push("</fieldset>")):(z=C+":00",y.push('<span class="minute'+x+'">'+i+":"+(10>C?"0"+C:C)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(y.join(""));var E=this.date.getUTCFullYear(),F=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active");E==f&&F.eq(this.date.getUTCMonth()).addClass("active"),(k>f||f>m)&&F.addClass("disabled"),f==k&&F.slice(0,l).addClass("disabled"),f==m&&F.slice(n+1).addClass("disabled"),y="",f=10*parseInt(f/10,10);var G=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td");f-=1;for(var C=-1;11>C;C++)y+='<span class="year'+(-1==C||10==C?" old":"")+(E==f?" active":"")+(k>f||f>m?" disabled":"")+'">'+f+"</span>",f+=1;G.html(y),this.place()}},updateNavArrows:function(){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth(),d=a.getUTCDate(),e=a.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-1/0&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()&&e<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()&&e>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-1/0&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-1/0&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-1/0&&b<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&b>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(b){if(b.preventDefault(),b.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var c=b.originalEvent,d=c.wheelDelta,e=d>0?1:0===d?0:-1;this.wheelViewModeNavigationInverseDirection&&(e=-e),this.showMode(e),setTimeout(a.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(c){c.stopPropagation(),c.preventDefault();var d=a(c.target).closest("span, td, th, legend");if(1==d.length){if(d.is(".disabled"))return this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate}),void 0;switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var f=e.modes[this.viewMode].navStep*("prev"==d[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,f);break;case 1:this.viewDate=this.moveDate(this.viewDate,f);break;case 2:this.viewDate=this.moveMonth(this.viewDate,f);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,f)}this.fill();break;case"today":var g=new Date;g=b(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),0),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(g),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!d.is(".disabled")){var h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),j=this.viewDate.getUTCDate(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();if(d.is(".month")?(this.viewDate.setUTCDate(1),i=d.parent().find("span").index(d),j=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(i),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".year")?(this.viewDate.setUTCDate(1),h=parseInt(d.text(),10)||0,this.viewDate.setUTCFullYear(h),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".hour")?(k=parseInt(d.text(),10)||0,(d.hasClass("hour_am")||d.hasClass("hour_pm"))&&(12==k&&d.hasClass("hour_am")?k=0:12!=k&&d.hasClass("hour_pm")&&(k+=12)),this.viewDate.setUTCHours(k),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".minute")&&(l=parseInt(d.text().substr(d.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(l),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(b(h,i,j,k,l,m,0))),0!=this.viewMode){var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(d.is(".day")&&!d.is(".disabled")){var j=parseInt(d.text(),10)||1,h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();d.is(".old")?0===i?(i=11,h-=1):i-=1:d.is(".new")&&(11==i?(i=0,h+=1):i+=1),this.viewDate.setUTCFullYear(h),this.viewDate.setUTCMonth(i),this.viewDate.setUTCDate(j),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(b(h,i,j,k,l,m,0))}var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(a,b){b&&"date"!=b||(this.date=a),b&&"view"!=b||(this.viewDate=a),this.fill(),this.setValue();var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&(c.change(),this.autoclose&&(!b||"date"==b)),this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCMinutes(c.getUTCMinutes()+b*this.minuteStep),c},moveHour:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCHours(c.getUTCHours()+b),c},moveDate:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCDate(c.getUTCDate()+b),c},moveMonth:function(a,b){if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),g=e.getUTCMonth(),h=Math.abs(b);if(b=b>0?1:-1,1==h)d=-1==b?function(){return e.getUTCMonth()==g}:function(){return e.getUTCMonth()!=c},c=g+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var i=0;h>i;i++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!=e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.startDate&&a<=this.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return 27==a.keyCode&&this.show(),void 0;var b,c,d,e=!1;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;b=37==a.keyCode?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),4==viewMode?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):3==viewMode?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):2==viewMode?(c=this.moveDate(this.date,b),d=this.moveDate(this.viewDate,b)):1==viewMode?(c=this.moveHour(this.date,b),d=this.moveHour(this.viewDate,b)):0==viewMode&&(c=this.moveMinute(this.date,b),d=this.moveMinute(this.viewDate,b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;b=38==a.keyCode?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),4==viewMode?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):3==viewMode?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):2==viewMode?(c=this.moveDate(this.date,7*b),d=this.moveDate(this.viewDate,7*b)):1==viewMode?this.showMeridian?(c=this.moveHour(this.date,6*b),d=this.moveHour(this.viewDate,6*b)):(c=this.moveHour(this.date,4*b),d=this.moveHour(this.viewDate,4*b)):0==viewMode&&(c=this.moveMinute(this.date,4*b),d=this.moveMinute(this.viewDate,4*b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 13:if(0!=this.viewMode){var f=this.viewMode;this.showMode(-1),this.fill(),f==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();a.preventDefault();break;case 9:this.hide()}if(e){var g;this.isInput?g=this.element:this.component&&(g=this.element.find("input")),g&&g.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(a){if(a){var b=Math.max(0,Math.min(e.modes.length-1,this.viewMode+a));b>=this.minView&&b<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:b}),this.viewMode=b)}this.picker.find(">div").hide().filter(".datetimepicker-"+e.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(){this._setDate(null,"date")}},a.fn.datetimepicker=function(b){var d=Array.apply(null,arguments);return d.shift(),this.each(function(){var e=a(this),f=e.data("datetimepicker"),g="object"==typeof b&&b;f||e.data("datetimepicker",f=new c(this,a.extend({},a.fn.datetimepicker.defaults,g))),"string"==typeof b&&"function"==typeof f[b]&&f[b].apply(f,d)})},a.fn.datetimepicker.defaults={},a.fn.datetimepicker.Constructor=c;var d=a.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}},e={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return 0===a%4&&0!==a%100||0===a%400},getDaysInMonth:function(a,b){return[31,e.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},getDefaultFormat:function(a,b){if("standard"==a)return"input"==b?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==a)return"input"==b?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(a){if("standard"==a)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==a)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(a,b){var c=a.replace(this.validParts(b),"\0").split("\0"),d=a.match(this.validParts(b));if(!c||!c.length||!d||0==d.length)throw new Error("Invalid date format.");return{separators:c,parts:d}},parseDate:function(e,f,g,h){if(e instanceof Date){var i=new Date(e.valueOf()-6e4*e.getTimezoneOffset());return i.setMilliseconds(0),i}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(e)&&(f=this.parseFormat("yyyy-mm-dd",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(e)&&(f=this.parseFormat("yyyy-mm-dd hh:ii",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(e)&&(f=this.parseFormat("yyyy-mm-dd hh:ii:ss",h)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(e)){var j,k,l=/([-+]\d+)([dmwy])/,m=e.match(/([-+]\d+)([dmwy])/g);e=new Date;for(var n=0;n<m.length;n++)switch(j=l.exec(m[n]),k=parseInt(j[1]),j[2]){case"d":e.setUTCDate(e.getUTCDate()+k);break;case"m":e=c.prototype.moveMonth.call(c.prototype,e,k);break;case"w":e.setUTCDate(e.getUTCDate()+7*k);break;case"y":e=c.prototype.moveYear.call(c.prototype,e,k)}return b(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),0)}var o,p,j,m=e&&e.match(this.nonpunctuation)||[],e=new Date(0,0,0,0,0,0,0),q={},r=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],s={hh:function(a,b){return a.setUTCHours(b)},h:function(a,b){return a.setUTCHours(b)},HH:function(a,b){return a.setUTCHours(12==b?0:b)},H:function(a,b){return a.setUTCHours(12==b?0:b)},ii:function(a,b){return a.setUTCMinutes(b)},i:function(a,b){return a.setUTCMinutes(b)},ss:function(a,b){return a.setUTCSeconds(b)},s:function(a,b){return a.setUTCSeconds(b)},yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)},p:function(a,b){return a.setUTCHours(1==b?a.getUTCHours()+12:a.getUTCHours())}};if(s.M=s.MM=s.mm=s.m,s.dd=s.d,s.P=s.p,e=b(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),m.length==f.parts.length){for(var n=0,t=f.parts.length;t>n;n++){if(o=parseInt(m[n],10),j=f.parts[n],isNaN(o))switch(j){case"MM":p=a(d[g].months).filter(function(){var a=this.slice(0,m[n].length),b=m[n].slice(0,a.length);return a==b}),o=a.inArray(p[0],d[g].months)+1;break;case"M":p=a(d[g].monthsShort).filter(function(){var a=this.slice(0,m[n].length),b=m[n].slice(0,a.length);return a==b}),o=a.inArray(p[0],d[g].monthsShort)+1;break;case"p":case"P":o=a.inArray(m[n].toLowerCase(),d[g].meridiem)}q[j]=o}for(var u,n=0;n<r.length;n++)u=r[n],u in q&&!isNaN(q[u])&&s[u](e,q[u])}return e},formatDate:function(b,c,f,g){if(null==b)return"";var h;if("standard"==g)h={yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear(),m:b.getUTCMonth()+1,M:d[f].monthsShort[b.getUTCMonth()],MM:d[f].months[b.getUTCMonth()],d:b.getUTCDate(),D:d[f].daysShort[b.getUTCDay()],DD:d[f].days[b.getUTCDay()],p:2==d[f].meridiem.length?d[f].meridiem[b.getUTCHours()<12?0:1]:"",h:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds()},h.H=2==d[f].meridiem.length?0==h.h%12?12:h.h%12:h.h,h.HH=(h.H<10?"0":"")+h.H,h.P=h.p.toUpperCase(),h.hh=(h.h<10?"0":"")+h.h,h.ii=(h.i<10?"0":"")+h.i,h.ss=(h.s<10?"0":"")+h.s,h.dd=(h.d<10?"0":"")+h.d,h.mm=(h.m<10?"0":"")+h.m;else{if("php"!=g)throw new Error("Invalid format type.");h={y:b.getUTCFullYear().toString().substring(2),Y:b.getUTCFullYear(),F:d[f].months[b.getUTCMonth()],M:d[f].monthsShort[b.getUTCMonth()],n:b.getUTCMonth()+1,t:e.getDaysInMonth(b.getUTCFullYear(),b.getUTCMonth()),j:b.getUTCDate(),l:d[f].days[b.getUTCDay()],D:d[f].daysShort[b.getUTCDay()],w:b.getUTCDay(),N:0==b.getUTCDay()?7:b.getUTCDay(),S:b.getUTCDate()%10<=d[f].suffix.length?d[f].suffix[b.getUTCDate()%10-1]:"",a:2==d[f].meridiem.length?d[f].meridiem[b.getUTCHours()<12?0:1]:"",g:0==b.getUTCHours()%12?12:b.getUTCHours()%12,G:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds()},h.m=(h.n<10?"0":"")+h.n,h.d=(h.j<10?"0":"")+h.j,h.A=h.a.toString().toUpperCase(),h.h=(h.g<10?"0":"")+h.g,h.H=(h.G<10?"0":"")+h.G,h.i=(h.i<10?"0":"")+h.i,h.s=(h.s<10?"0":"")+h.s}for(var b=[],i=a.extend([],c.separators),j=0,k=c.parts.length;k>j;j++)i.length&&b.push(i.shift()),b.push(h[c.parts[j]]);return b.join("")},convertViewMode:function(a){switch(a){case 4:case"decade":a=4;break;case 3:case"year":a=3;break;case 2:case"month":a=2;break;case 1:case"day":a=1;break;case 0:case"hour":a=0}return a},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};e.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-hours">'+'<table class=" table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-days">'+'<table class=" table-condensed">'+e.headTemplate+"<tbody></tbody>"+e.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-months">'+'<table class="table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-years">'+'<table class="table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+"</table>"+"</div>"+"</div>",a.fn.datetimepicker.DPGlobal=e,a.fn.datetimepicker.noConflict=function(){return a.fn.datetimepicker=old,this},a(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(b){var c=a(this);c.data("datetimepicker")||(b.preventDefault(),c.datetimepicker("show"))}),a(function(){a('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery),!function(a){function b(){return new Date(Date.UTC.apply(Date,arguments))}var c=function(b,c){var f=this;switch(this.element=a(b),this.language=c.language||this.element.data("date-language")||"en",this.language=this.language in d?this.language:"en",this.format=e.parseFormat(c.format||this.element.data("date-format")||"m/d/yy"),this.picker=a(e.template).appendTo("body").on({click:a.proxy(this.click,this)}),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.isInput?this.element.on({focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}):this.component&&this.hasInput?(this.element.find("input").on({focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}),this.component.on("click",a.proxy(this.show,this))):this.element.on("click",a.proxy(this.show,this)),a(document).on("mousedown",function(b){0==a(b.target).closest(".datepicker").length&&f.hide()}),this.autoclose=!0,"autoclose"in c?this.autoclose=c.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in c?this.keyboardNavigation=c.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),c.startView||this.element.data("date-start-view")){case 2:case"decade":this.viewMode=this.startViewMode=2;
break;case 1:case"year":this.viewMode=this.startViewMode=1;break;case 0:case"month":default:this.viewMode=this.startViewMode=0}this.todayBtn=c.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=c.todayHighlight||this.element.data("date-today-highlight")||!0,this.weekStart=(c.weekStart||this.element.data("date-weekstart")||d[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.setStartDate(c.startDate||this.element.data("date-startdate")),this.setEndDate(c.endDate||this.element.data("date-enddate")),this.fillDow(),this.fillMonths(),this.update(),this.showMode()};c.prototype={constructor:c,show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.update(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),this.element.trigger({type:"show",date:this.date})},hide:function(b){this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),b&&b.currentTarget.value&&this.setValue(),this.element.trigger({type:"hide",date:this.date})},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6e4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6e4*a.getTimezoneOffset()))},setUTCDate:function(a){this.date=a,this.setValue()},setValue:function(){var a=e.formatDate(this.date,this.format,this.language);this.isInput?this.element.prop("value",a):(this.component&&this.element.find("input").prop("value",a),this.element.data("date",a))},setStartDate:function(a){this.startDate=a||-1/0,this.startDate!==-1/0&&(this.startDate=e.parseDate(this.startDate,this.format,this.language)),this.update(),this.updateNavArrows()},setEndDate:function(a){this.endDate=a||1/0,1/0!==this.endDate&&(this.endDate=e.parseDate(this.endDate,this.format,this.language)),this.update(),this.updateNavArrows()},place:function(){var b=parseInt(this.element.parents().filter(function(){return"auto"!=a(this).css("z-index")}).first().css("z-index"))+10,c=this.component?this.component.offset():this.element.offset();this.picker.css({top:c.top+this.height,left:c.left,zIndex:b})},update:function(){this.date=e.parseDate(this.isInput?this.element.prop("value"):this.element.data("date")||this.element.find("input").prop("value"),this.format,this.language),this.viewDate=this.date<this.startDate?new Date(this.startDate):this.date>this.endDate?new Date(this.endDate):new Date(this.date),this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+d[this.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+d[this.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},fill:function(){var a=new Date(this.viewDate),c=a.getUTCFullYear(),f=a.getUTCMonth(),g=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,h=this.startDate!==-1/0?this.startDate.getUTCMonth():-1/0,i=1/0!==this.endDate?this.endDate.getUTCFullYear():1/0,j=1/0!==this.endDate?this.endDate.getUTCMonth():1/0,k=this.date.valueOf(),l=new Date;this.picker.find(".datepicker-days thead th:eq(1)").text(d[this.language].months[f]+" "+c),this.picker.find("tfoot th.today").text(d[this.language].today).toggle(this.todayBtn),this.updateNavArrows(),this.fillMonths();var m=b(c,f-1,28,0,0,0,0),n=e.getDaysInMonth(m.getUTCFullYear(),m.getUTCMonth());m.setUTCDate(n),m.setUTCDate(n-(m.getUTCDay()-this.weekStart+7)%7);var o=new Date(m);o.setUTCDate(o.getUTCDate()+42),o=o.valueOf();for(var p,q=[];m.valueOf()<o;)m.getUTCDay()==this.weekStart&&q.push("<tr>"),p="",m.getUTCFullYear()<c||m.getUTCFullYear()==c&&m.getUTCMonth()<f?p+=" old":(m.getUTCFullYear()>c||m.getUTCFullYear()==c&&m.getUTCMonth()>f)&&(p+=" new"),this.todayHighlight&&m.getUTCFullYear()==l.getFullYear()&&m.getUTCMonth()==l.getMonth()&&m.getUTCDate()==l.getDate()&&(p+=" today"),m.valueOf()==k&&(p+=" active"),(m.valueOf()<this.startDate||m.valueOf()>this.endDate)&&(p+=" disabled"),q.push('<td class="day'+p+'">'+m.getUTCDate()+"</td>"),m.getUTCDay()==this.weekEnd&&q.push("</tr>"),m.setUTCDate(m.getUTCDate()+1);this.picker.find(".datepicker-days tbody").empty().append(q.join(""));var r=this.date.getUTCFullYear(),s=this.picker.find(".datepicker-months").find("th:eq(1)").text(c).end().find("span").removeClass("active");r==c&&s.eq(this.date.getUTCMonth()).addClass("active"),(g>c||c>i)&&s.addClass("disabled"),c==g&&s.slice(0,h).addClass("disabled"),c==i&&s.slice(j+1).addClass("disabled"),q="",c=10*parseInt(c/10,10);var t=this.picker.find(".datepicker-years").find("th:eq(1)").text(c+"-"+(c+9)).end().find("td");c-=1;for(var u=-1;11>u;u++)q+='<span class="year'+(-1==u||10==u?" old":"")+(r==c?" active":"")+(g>c||c>i?" disabled":"")+'">'+c+"</span>",c+=1;t.html(q)},updateNavArrows:function(){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.startDate!==-1/0&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.startDate!==-1/0&&b<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&b>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(c){c.stopPropagation(),c.preventDefault();var d=a(c.target).closest("span, td, th");if(1==d.length)switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var f=e.modes[this.viewMode].navStep*("prev"==d[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,f);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,f)}this.fill();break;case"today":var g=new Date;g.setUTCHours(0),g.setUTCMinutes(0),g.setUTCSeconds(0),g.setUTCMilliseconds(0),this.showMode(-2);var h="linked"==this.todayBtn?null:"view";this._setDate(g,h)}break;case"span":if(!d.is(".disabled")){if(this.viewDate.setUTCDate(1),d.is(".month")){var i=d.parent().find("span").index(d);this.viewDate.setUTCMonth(i),this.element.trigger({type:"changeMonth",date:this.viewDate})}else{var j=parseInt(d.text(),10)||0;this.viewDate.setUTCFullYear(j),this.element.trigger({type:"changeYear",date:this.viewDate})}this.showMode(-1),this.fill()}break;case"td":if(d.is(".day")&&!d.is(".disabled")){var k=parseInt(d.text(),10)||1,j=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth();d.is(".old")?0==i?(i=11,j-=1):i-=1:d.is(".new")&&(11==i?(i=0,j+=1):i+=1),this._setDate(b(j,i,k,0,0,0,0))}}},_setDate:function(a,b){b&&"date"!=b||(this.date=a),b&&"view"!=b||(this.viewDate=a),this.fill(),this.setValue(),this.element.trigger({type:"changeDate",date:this.date});var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&(c.change(),this.autoclose&&this.hide())},moveMonth:function(a,b){if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),g=e.getUTCMonth(),h=Math.abs(b);if(b=b>0?1:-1,1==h)d=-1==b?function(){return e.getUTCMonth()==g}:function(){return e.getUTCMonth()!=c},c=g+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var i=0;h>i;i++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!=e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.startDate&&a<=this.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return 27==a.keyCode&&this.show(),void 0;var b,c,d,e=!1;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;b=37==a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):(c=new Date(this.date),c.setUTCDate(this.date.getUTCDate()+b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;b=38==a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):(c=new Date(this.date),c.setUTCDate(this.date.getUTCDate()+7*b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+7*b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 13:this.hide(),a.preventDefault();break;case 9:this.hide()}if(e){this.element.trigger({type:"changeDate",date:this.date});var f;this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change()}},showMode:function(a){a&&(this.viewMode=Math.max(0,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+e.modes[this.viewMode].clsName).show(),this.updateNavArrows()}},a.fn.datepicker=function(b){var d=Array.apply(null,arguments);return d.shift(),this.each(function(){var e=a(this),f=e.data("datepicker"),g="object"==typeof b&&b;f||e.data("datepicker",f=new c(this,a.extend({},a.fn.datepicker.defaults,g))),"string"==typeof b&&"function"==typeof f[b]&&f[b].apply(f,d)})},a.fn.datepicker.defaults={},a.fn.datepicker.Constructor=c;var d=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today"}},e={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return 0===a%4&&0!==a%100||0===a%400},getDaysInMonth:function(a,b){return[31,e.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\0").split("\0"),c=a.match(this.validParts);if(!b||!b.length||!c||0==c.length)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(e,f,g){if(e instanceof Date)return e;if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(e)){var h,i,j=/([-+]\d+)([dmwy])/,k=e.match(/([-+]\d+)([dmwy])/g);e=new Date;for(var l=0;l<k.length;l++)switch(h=j.exec(k[l]),i=parseInt(h[1]),h[2]){case"d":e.setUTCDate(e.getUTCDate()+i);break;case"m":e=c.prototype.moveMonth.call(c.prototype,e,i);break;case"w":e.setUTCDate(e.getUTCDate()+7*i);break;case"y":e=c.prototype.moveYear.call(c.prototype,e,i)}return b(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0)}var m,n,h,k=e&&e.match(this.nonpunctuation)||[],e=new Date,o={},p=["yyyy","yy","M","MM","m","mm","d","dd"],q={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};if(q.M=q.MM=q.mm=q.m,q.dd=q.d,e=b(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0),k.length==f.parts.length){for(var l=0,r=f.parts.length;r>l;l++){if(m=parseInt(k[l],10),h=f.parts[l],isNaN(m))switch(h){case"MM":n=a(d[g].months).filter(function(){var a=this.slice(0,k[l].length),b=k[l].slice(0,a.length);return a==b}),m=a.inArray(n[0],d[g].months)+1;break;case"M":n=a(d[g].monthsShort).filter(function(){var a=this.slice(0,k[l].length),b=k[l].slice(0,a.length);return a==b}),m=a.inArray(n[0],d[g].monthsShort)+1}o[h]=m}for(var s,l=0;l<p.length;l++)s=p[l],s in o&&q[s](e,o[s])}return e},formatDate:function(b,c,e){var f={d:b.getUTCDate(),m:b.getUTCMonth()+1,M:d[e].monthsShort[b.getUTCMonth()],MM:d[e].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};f.dd=(f.d<10?"0":"")+f.d,f.mm=(f.m<10?"0":"")+f.m;for(var b=[],g=a.extend([],c.separators),h=0,i=c.parts.length;i>h;h++)g.length&&b.push(g.shift()),b.push(f[c.parts[h]]);return b.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};e.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+e.headTemplate+"<tbody></tbody>"+e.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+"</table>"+"</div>"+"</div>"}(window.jQuery),function(a){var b,c=a();a.fn.sortable=function(d){var e=String(d);return d=a.extend({connectWith:!1},d),this.each(function(){if(/^enable|disable|destroy$/.test(e)){var f=a(this).children(a(this).data("items")).attr("draggable","enable"==e);return"destroy"==e&&f.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"),void 0}var g,h,f=a(this).children(d.items),i=a("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');f.find(d.handle).mousedown(function(){g=!0}).mouseup(function(){g=!1}),a(this).data("items",d.items),c=c.add(i),d.connectWith&&a(d.connectWith).add(this).data("connectWith",d.connectWith),f.attr("draggable","true").on("dragstart.h5s",function(c){if(d.handle&&!g)return!1;g=!1;var e=c.originalEvent.dataTransfer;e.effectAllowed="move",e.setData("Text","dummy"),h=(b=a(this)).addClass("sortable-dragging").index(),c.stopPropagation()}).on("dragend.h5s",function(){b&&(b.removeClass("sortable-dragging").show(),c.detach(),h!=b.index()&&b.parent().trigger("sortupdate",{item:b}),b=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,i]).on("dragover.h5s dragenter.h5s drop.h5s",function(e){return f.is(b)||d.connectWith===a(b).parent().data("connectWith")?"drop"==e.type?(e.stopPropagation(),c.filter(":visible").after(b),b.trigger("dragend.h5s"),!1):(e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",f.is(this)?(d.forcePlaceholderSize&&i.height(b.outerHeight()),b.hide(),a(this)[i.index()<a(this).index()?"after":"before"](i),c.not(i).detach()):c.is(this)||a(this).children(d.items).length||(c.detach(),a(this).append(i)),!1):!0})})}}(jQuery),function(){!function(a){var b;return b=["font","letter-spacing"],a.fn.autoGrow=function(c){var d,e,f;return e="remove"===c||c===!1||(null!=c?!!c.remove:!1),d=null!=(f=null!=c?c.comfortZone:void 0)?f:c,null!=d&&(d=+d),this.each(function(){var c,f,g,h,i,j,k,l,m,n;if(g=a(this),j=g.next().filter("pre.autogrow"),j.length&&e)return g.unbind("input.autogrow"),j.remove();if(j.length){for(i={},k=0,m=b.length;m>k;k++)h=b[k],i[h]=g.css(h);if(j.css(i),null!=d)return c=function(){return j.text(g.val()),g.width(j.width()+d)},g.unbind("input.autogrow"),g.bind("input.autogrow",c),c()}else if(!e){for("0px"===g.css("min-width")&&g.css("min-width",""+g.width()+"px"),i={position:"absolute",top:-99999,left:-99999,width:"auto",visibility:"hidden"},l=0,n=b.length;n>l;l++)h=b[l],i[h]=g.css(h);return j=a('<pre class="autogrow"/>').css(i),j.insertAfter(g),f=null!=d?d:70,c=function(){return j.text(g.val()),g.width(j.width()+f)},g.bind("input.autogrow",c),c()}})}}("undefined"!=typeof Zepto&&null!==Zepto?Zepto:jQuery)}.call(this),function(a){function b(b){if("string"==typeof b.data){var c=b.handler,d=b.data.toLowerCase().split(" ");b.handler=function(b){if(this===b.target||!/textarea|select|button/i.test(b.target.nodeName)&&"text"!==b.target.type){var e="keypress"!==b.type&&a.hotkeys.specialKeys[b.which],f=String.fromCharCode(b.which).toLowerCase(),g="",h={};b.altKey&&"alt"!==e&&(g+="alt+"),b.ctrlKey&&"ctrl"!==e&&(g+="ctrl+"),b.metaKey&&!b.ctrlKey&&"meta"!==e&&(g+="meta+"),b.shiftKey&&"shift"!==e&&(g+="shift+"),e?h[g+e]=!0:(h[g+f]=!0,h[g+a.hotkeys.shiftNums[f]]=!0,"shift+"===g&&(h[a.hotkeys.shiftNums[f]]=!0));for(var i=0,j=d.length;j>i;i++)if(h[d[i]])return c.apply(this,arguments)}}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})}(jQuery),$(document).on("ready page:load",function(){var a;return a=!1,$("#add-collaborator-form input[name=email]").typeahead({minLength:3,source:function(b,c){return clearTimeout(a),a=setTimeout(function(){var a;return a=[],$(".collaborators-table td.email").each(function(){return a.push($(this).text())}),$.ajax({url:"/officers/typeahead",data:{query:b},success:function(b){return b=$.grep(b,function(b){return-1===a.indexOf(b)}),c(b)}})},200)}})});var add_empty_class_to_inputs,apply_section_cover,available_sections_filter_timeout,hide_already_selected_sections,remove_section_cover,save_sort_order,search_available_sections,section_category_dropdown_changed,update_section_category_dropdown_from_input;hide_already_selected_sections=function(){var a,b;return a=[],b=!1,$(".sections-for-editing .section").each(function(){return a.push($(this).data("section-id"))}),$(".available-sections-table .section").each(function(){var c,d;return c=$(this),d=c.data("section-id"),-1!==a.indexOf(d)?c.hide():(b=!0,c.show())}),b?$(".available-sections-table .no-sections").hide():$(".available-sections-table .no-sections").show()},apply_section_cover=function(){var a,b;return a=$("<div class='sections-for-editing-cover'>Saving order...</div>"),b=$(".sections-for-editing-wrapper"),a.css({width:b.width(),height:b.height()}),a.appendTo(b)},remove_section_cover=function(){return $(".sections-for-editing-cover").remove()},save_sort_order=function(){var a,b;return apply_section_cover(),a=$(".sections-for-editing-wrapper").data("project-id"),b=[],$(".sections-for-editing-wrapper .section").each(function(){return b.push($(this).data("section-id"))}),$.ajax({url:"/projects/"+a+"/sections/reorder",type:"POST",data:{sections:b},success:function(){return remove_section_cover()}})},update_section_category_dropdown_from_input=function(){var a,b;return b=$("#section-category-input").val(),a=$("#section-category-select option[value='"+b+"']"),a.length>0?(a.attr("selected",!0),$("#section-category-input").hide()):($("#section-category-select option[value=Other]").attr("selected",!0),$("#section-category-input").show())},section_category_dropdown_changed=function(){var a;return a=$("#section-category-select").val(),"Other"!==a?($("#section-category-input").hide(),$("#section-category-input").val(a)):($("#section-category-input").val(""),$("#section-category-input").show())},search_available_sections=function(){var a,b;return b=$("#available-sections-filter").val(),a=$(".available-sections-table").data("project-id"),$(".available-sections-table").addClass("loading"),$.ajax({url:"/projects/"+a+"/search-available-sections",type:"GET",data:{query:b},success:function(a){var b;return b=$(a.available_sections_tbody_html),$(".available-sections-table tbody.section").remove(),$(".available-sections-table thead").after(b),$(".available-sections-table").removeClass("loading")}})},Rfpez.has_unsaved_changes=!1,$(document).on("ready page:load sectionsreloaded",function(){return hide_already_selected_sections(),$(".category-sections").sortable({forcePlaceholderSize:!0}),$(".sections-for-editing").sortable({handle:"h5",forcePlaceholderSize:!0}),$(".sections-for-editing").bind("sortupdate",save_sort_order),$(".fill-in-blanks")?add_empty_class_to_inputs():void 0}),$(document).on("click",".sow-sidebar a",function(a){return Rfpez.has_unsaved_changes!==!0||confirm("Looks like you have some unsaved changes. Are you sure you want to leave this page?")?void 0:a.preventDefault()}),$(document).on("click",".show-more-templates-link",function(){var a;return a=$(this).closest("li"),a.addClass("loading-more"),$.ajax({url:$(this).data("href"),type:"GET",success:function(b){var c;return c=$(b.html),a.before(c),a.removeClass("loading-more"),a.addClass("all-loaded")}})}),$(document).on("click",".sections-for-editing .remove-button",function(a){var b;return a.preventDefault(),b=$(this),b.button("loading"),$.ajax({url:b.data("href"),type:"DELETE",data:{requested_html:"sections_for_editing"},success:function(a){var c;return c=$(a.sections_for_editing_html),$(".sections-for-editing-wrapper").replaceWith(c),$(document).trigger("sectionsreloaded"),b.button("reset")}})}),$(document).on("click",".selected-sections .remove-button",function(a){var b;return a.preventDefault(),b=$(this),b.button("loading"),$.ajax({url:b.data("href"),type:"DELETE",data:{requested_html:"selected_sections"},success:function(a){var b;return b=$(a.selected_sections_html),$(".selected-sections").replaceWith(b),hide_already_selected_sections()}})}),$(document).on("click",".section .add-button",function(a){var b;return a.preventDefault(),b=$(this),b.button("loading"),$.ajax({url:b.data("href"),type:"POST",success:function(a){var c;return c=$(a.sections_for_editing_html),$(".sections-for-editing-wrapper").replaceWith(c),$(document).trigger("sectionsreloaded"),$("#add-edit-section-modal").modal("hide"),hide_already_selected_sections(),b.button("reset")}})}),$(document).on("click",".add-section-button",function(){return $("#edit-section-form").resetForm(),$("#edit-section-form").find("input[name=section_id]").val(""),$("#add-edit-section-modal").find(".modal-header h3").text("Add Section"),$("#add-edit-section-modal").find(".will-fork").hide(),$("#section-category-select").val("Deliverables"),section_category_dropdown_changed(),hide_already_selected_sections(),$("#add-edit-section-modal").modal("show")}),$(document).on("click",".edit-section-link",function(){var a,b,c,d,e;return c=$(this).closest(".section"),d=c.data("section-id"),e=c.data("section-title"),a=c.find(".body").html(),b=c.closest(".category").data("name"),c.data("will-fork")===!0?$("#add-edit-section-modal").find(".will-fork").show():$("#add-edit-section-modal").find(".will-fork").hide(),$("#add-edit-section-modal").find(".modal-header h3").text("Edit Section '"+e+"'"),$("#edit-section-form").find("input[name=section_id]").val(d),$("#edit-section-form").find("input[name=project_section\\[section_category\\]]").val(b),$("#edit-section-form").find("input[name=project_section\\[title\\]]").val(e),$("#edit-section-form").find("textarea[name=project_section\\[body\\]]").val(a),update_section_category_dropdown_from_input(),$("#add-edit-section-modal .section-form-li a").click(),$("#add-edit-section-modal").modal("show")}),$(document).on("submit","#edit-section-form",function(a){var b,c;return a.preventDefault(),c=$(this),b=c.find(".save-button"),b.button("loading"),c.ajaxSubmit({success:function(a){var c;return c=$(a.sections_for_editing_html),$(".sections-for-editing-wrapper").replaceWith(c),$(document).trigger("sectionsreloaded"),$("#add-edit-section-modal").modal("hide"),b.button("reset")}})}),$(document).on("click","li.template .preview-button",function(){return $(this).closest("div").find(".modal").modal("show")}),$(document).on("change","#section-category-select",section_category_dropdown_changed),$(document).on("click","tbody.section",function(a){return $(a.target).hasClass("add-button")?void 0:$(this).find(".preview").toggle()}),available_sections_filter_timeout=!1,$(document).on("input","#available-sections-filter",function(){return clearTimeout(available_sections_filter_timeout),available_sections_filter_timeout=setTimeout(function(){return search_available_sections()},200)}),add_empty_class_to_inputs=function(){return $(".fill-in-blanks input[type=text]").each(function(){return $(this).val()?$(this).removeClass("empty"):$(this).addClass("empty")})},$("input[data-variable]").autoGrow({comfortZone:5}),$(document).on("focus","input[data-variable]",function(){var a;return a=$(this),a.tooltip({title:a.data("helper-text"),placement:"bottom",trigger:"manual"}),a.tooltip("show")}),$(document).on("keydown","input[data-variable]",function(a){var b,c,d;if(13===a.keyCode||9===a.keyCode)for(d=$("input[data-variable]"),b=d.index(this)+1;b<d.length;){if(c=$(d[b]),""===c.val())return a.preventDefault(),c.select();b++}}),$(document).on("blur","input[data-variable]",function(){return $(this).tooltip("hide")}),$(document).on("input blur","input[data-variable]",function(){var a,b,c;return Rfpez.has_unsaved_changes=!0,a=$(this),b=a.data("variable"),c=a.val(),$("input[data-variable="+b+"]").each(function(){return $(this).val(c),$(this).trigger("input.autogrow")}),add_empty_class_to_inputs()}),$(document).on("change","#project-type-select",function(){return"Other"===$(this).val()?$("#new-project-type-input").removeClass("hide"):$("#new-project-type-input").val("").addClass("hide")}),function(){var a,b,c,d,e,f,g;return c=Backbone.Model.extend({validate:function(a){return a.body?void 0:!0},defaults:function(){return{owner:!1}},clear:function(){return this.destroy()}}),d=Backbone.Collection.extend({model:c}),e=Backbone.View.extend({tagName:"div",className:"well comment",template:_.template('<div class="body">\n  <span class="author">\n    <%- officer.name %>\n  </span>\n  <span class="timestamp">\n    <span class="posted-at">Posted <span class="timeago" title="<%- formatted_created_at %>"></span></span>\n  </span>\n  <a class="delete-comment only-user only-user-<%- officer.user_id %>">Delete</a>\n\n  <p class="no-margin"><%= _.escape(body).replace(new RegExp(\'\\r?\\n\', \'g\'), \'<br />\') %></p>\n</div>'),events:{"click a.delete-comment":"clear"},initialize:function(){return this.model.bind("change",this.render,this),this.model.bind("destroy",this.remove,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.find(".timeago").timeago(),this},clear:function(){return this.model.clear()}}),g=Backbone.View.extend({tagName:"div",className:"notification",template:_.template('<i class="<%- js_parsed.icon %>"></i>\n<%= js_parsed.text %>\n<div class="date"><span class="timeago" title="<%- formatted_created_at %>"></span></div>'),parse:function(){var a,b;return"Dismissal"===this.model.attributes.notification_type?(b=' <a href="'+this.model.attributes.parsed.link+'">'+this.model.attributes.payload.bid.vendor.company_name+"'s</a> bid was declined. ",a="icon-thumbs-down"):"Undismissal"===this.model.attributes.notification_type?(b=' <a href="'+this.model.attributes.parsed.link+'">'+this.model.attributes.payload.bid.vendor.company_name+"'s</a> bid was un-declined. ",a="icon-repeat"):"BidSubmit"===this.model.attributes.notification_type?(b=' <a href="'+this.model.attributes.parsed.link+'">'+this.model.attributes.payload.bid.vendor.company_name+"</a> submitted a bid. ",a="icon-list-alt"):"Award"===this.model.attributes.notification_type?(b=' The Contract was awarded to <a href="'+this.model.attributes.parsed.link+'">'+this.model.attributes.payload.bid.vendor.company_name+"</a>. ",a="icon-thumbs-up"):"ProjectCollaboratorAdded"===this.model.attributes.notification_type&&(b=" "+this.model.attributes.payload.officer.User.email+" was added as a collaborator. ",a="icon-user"),{text:null!=b?b:this.model.attributes.notification_type,icon:null!=a?a:"icon-arrow-right"}},initialize:function(){return this.model.bind("change",this.render,this),this.model.bind("destroy",this.remove,this)},render:function(){return this.$el.html(this.template(_.extend(this.model.toJSON(),{js_parsed:this.parse()}))),this},clear:function(){return this.model.clear()}}),b=Backbone.View.extend({initialize:function(){return f.bind("add",this.addOne,this),f.bind("reset",this.reset,this),f.bind("all",this.render,this),this.bind("errorAdding",this.showError),$("#add-comment-form").submit(this.addNew)},addNew:function(a){var b;return a.preventDefault(),b=(new Date).toISOString(),f.create({officer:{name:$("#add-comment-form").data("officer-name"),user_id:$("#add-comment-form").data("officer-user-id")},body:$("#add-comment-form textarea").val(),formatted_created_at:b},{error:function(a){return a.clear()}}),$("#add-comment-form").resetForm()},showError:function(a){return alert(a[0])},reset:function(){return $(".comments-list").html(""),this.addAll()},render:function(){},addOne:function(a){var b,c;return c=a.attributes.notification_type?new g({model:a}):new e({model:a}),b=c.render().el,$(".comments-list").append(b)},addAll:function(){return f.each(this.addOne)}}),a=!1,f=!1,Rfpez.Backbone.Comments=function(c,e){var g;return f=new d,g=f,a=new b({collection:g}),g.reset(e),g.url="/projects/"+c+"/comments",a}}(),function(){var a,b,c,d,e,f;return c=Backbone.Model.extend({validate:function(b){var c;return c=[],b.User.email?(b.User.email.match(/.gov$/i)?b.id||-1===f.existing_emails().indexOf(b.User.email.toLowerCase())||c.push("That collaborator already exists."):c.push("Sorry, .gov addresses only"),c.length>0?(a.trigger("errorAdding",c),c):void 0):!0},defaults:function(){return{owner:!1}},clear:function(){return this.destroy()}}),d=Backbone.Collection.extend({existing_emails:function(){return this.map(function(a){return a.attributes.User.email.toLowerCase()})},model:c}),e=Backbone.View.extend({tagName:"tr",template:_.template('<td class="email"><%- User.email %></td>\n<td>\n  <% if (pivot.owner === "1") { %>\n    <i class="icon-star"></i>\n  <% } %>\n</td>\n<td>\n  <span class="not-user-<%- User.id %> only-user only-user-<%- owner_id %>">\n    <% if (pivot.owner !== "1") { %>\n      <button class="btn btn-danger">Remove</button>\n    <% } else { %>\n      Can\'t remove the owner.\n    <% } %>\n  </span>\n  <span class="only-user only-user-<%- User.id %>">\n    That\'s you!\n  </span>\n</td>'),events:{"click .btn.btn-danger":"clear"},initialize:function(){return this.model.bind("change",this.render,this),this.model.bind("destroy",this.remove,this)},render:function(){return this.$el.html(this.template(_.extend(this.model.toJSON(),{owner_id:a.options.owner_id}))),this},clear:function(){return this.model.clear()}}),b=Backbone.View.extend({initialize:function(){return f.bind("add",this.addOne,this),f.bind("reset",this.reset,this),f.bind("all",this.render,this),this.bind("errorAdding",this.showError),$("#add-collaborator-form").submit(this.addNew)},addNew:function(a){var b;return a.preventDefault(),b=$("#add-collaborator-form input[name=email]").val(),$("#add-collaborator-form input[name=email]").val(""),f.create({User:{email:b},pivot:{owner:0}},{error:function(a){return a.clear()}})},showError:function(a){return $("#add-collaborator-form button").flash_button_message("warning",a[0])
},reset:function(){return $("#collaborators-tbody").html(""),this.addAll()},render:function(){},addOne:function(a){var b,c;return c=new e({model:a}),b=c.render().el,$("#collaborators-tbody").append(b)},addAll:function(){return f.each(this.addOne)}}),a=!1,f=!1,Rfpez.Backbone.Collaborators=function(c,e,g){var h;return f=new d,h=f,a=new b({collection:h,owner_id:e}),h.reset(g),h.url="/projects/"+c+"/collaborators",a}}(),function(){var a,b,c,d,e,f;return c=Backbone.Model.extend({validate:function(){},defaults:function(){return{date:"",name:"",sort_order:$("#deliverables-tbody tr").length}},clear:function(){return this.destroy()}}),d=Backbone.Collection.extend({model:c}),e=Backbone.View.extend({tagName:"tr",template:_.template('<td>\n  <input type="text" placeholder="Deliverable Name" class="name-input" value="<%- name %>">\n</td>\n<td class="completion-date">\n  <div class="input-append date datepicker-wrapper">\n    <input type="text" placeholder="Due Date" class="date-input" value="<%- date %>" />\n    <span class="add-on">\n      <i class="icon-calendar"></i>\n    </span>\n  </div>\n</td>\n<td>\n  <a class="btn remove-deliverable-button"><i class="icon-trash"></i></a>\n</td>'),events:{"click .remove-deliverable-button":"clear","input .name-input":"updateWithDelay","input .date-input":"updateWithDelay","change .date-input":"updateWithDelay"},initialize:function(){return this.model.bind("change",this.updateId,this),this.model.bind("create",this.render,this),this.model.bind("destroy",this.remove,this)},render:function(){var a,b;return this.$el.html(this.template(this.model.toJSON())),this.$el.find(".datepicker-wrapper").datepicker(),this.$el.data("id",null!=(a=this.model)?null!=(b=a.attributes)?b.id:void 0:void 0),this},updateWithDelay:function(){var a=this;return Rfpez.has_unsaved_changes=!0,this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(function(){return a.update()},200)},update:function(){return Rfpez.has_unsaved_changes=!1,this.model.save({name:this.$el.find(".name-input").val(),date:this.$el.find(".date-input").val(),sort_order:$("#deliverables-tbody tr").index(this.$el)})},updateId:function(){var a,b;return this.$el.data("id",null!=(a=this.model)?null!=(b=a.attributes)?b.id:void 0:void 0)},clear:function(){return this.model.clear()}}),b=Backbone.View.extend({initialize:function(){var a=this;return f.bind("add",this.addOne,this),f.bind("reset",this.reset,this),f.bind("all",this.render,this),$("#deliverables-tbody").bind("sortupdate",function(){var b;return b=[],$("#deliverables-tbody tr").each(function(){return b.push($(this).data("id"))}),$.ajax({url:"/projects/"+a.options.project_id+"/deliverables/order",type:"PUT",data:{deliverable_ids:b}})}),$(document).on("click",".add-deliverable-timeline-button",function(){return a.addNew()})},reset:function(){return $("#deliverables-tbody").html(""),this.addAll()},addNew:function(){return f.create()},addOne:function(a){var b,c;return c=new e({model:a}),b=c.render().el,$("#deliverables-tbody").append(b)},render:function(){return $("#deliverables-tbody").sortable("destroy"),$("#deliverables-tbody").sortable({forcePlaceholderSize:!0})},addAll:function(){return f.each(this.addOne)}}),a={},f={},Rfpez.Backbone.SowDeliverables=function(c,e){return f=new d,a=new b({collection:f,project_id:c}),f.reset(e),f.url="/projects/"+c+"/deliverables",a}}();var dismiss_selection,keep_bid_in_view,mouseover_select_timeout,on_mouseover_select,open_selection,star_selection,toggle_unread_selection;$(document).on("shown","#dismiss-modal",function(){return $(this).find("select").focus().val(""),$(this).find("input[name=reason_other]").val("").hide()}),$(document).on("change","#dismiss-modal select",function(){return"Other"===$(this).val()?$("#dismiss-modal input[name=reason_other]").show():$("#dismiss-modal input[name=reason_other]").val("").hide()}),$(document).on("click","#review-tips-toggle",function(){return $("#review-tips").collapse("toggle")}),$(document).on("show","#review-tips",function(){return $("#review-tips-toggle").data("show-text",$("#review-tips-toggle").text()),$("#review-tips-toggle").text($("#review-tips-toggle").data("hide-text"))}),$(document).on("hide","#review-tips",function(){return $("#review-tips-toggle").text($("#review-tips-toggle").data("show-text"))}),$(document).on("click",".bid-notification-td .mark-as-read, .bid-notification-td .mark-as-unread",function(){var a,b,c,d;return d=$(this),b=d.closest(".bid"),c=b.data("bid-id"),a=d.hasClass("mark-as-read")?"read":"unread",Rfpez.view_notification_payload("bid",c,a),"read"===a?b.removeClass("unread"):b.addClass("unread")}),$(document).on("click",".bid .unstar-button, .bid .star-button",function(){var a,b;return a=$(this).hasClass("unstar-button")?"0":"1",b=$(this).closest(".bid"),$.ajax({url:"/projects/"+b.data("project-id")+"/bids/"+b.data("bid-id")+"/star",data:{starred:a},type:"GET",success:function(a){return"0"===a.starred?b.find(".star-td").removeClass("starred"):b.find(".star-td").addClass("starred")}})}),$(document).on("show",".bid-details .collapse",function(){var a,b;return a=$(this).closest(".bid"),b=a.data("bid-id"),$(this).find(".dsbs-certifications").trigger("load-dsbs"),a.removeClass("unread"),Rfpez.view_notification_payload("bid",b,"read")}),$(document).on("click",".undismiss-button",function(){var a,b,c,d,e;return d=$(this),a=d.closest(".bid"),c=d.closest("[data-bid-id]"),e=c.data("project-id"),b=c.data("bid-id"),$.ajax({url:"/projects/"+e+"/bids/"+b+"/dismiss",type:"GET",success:function(b){var c;return"success"===b.status?d.data("move-to-table")?(Rfpez.move_bid_selection("down"),c=$(b.html),a.remove(),$(".bids-table.open-bids > thead").after(c)):window.location.reload():void 0}})}),$(document).on("click",".show-dismiss-modal",function(){var a,b,c,d,e,f,g;return d=$(this),a=d.closest(".bid"),c=d.closest("[data-bid-id]"),f=c.data("project-id"),b=c.data("bid-id"),g=c.data("vendor-company-name"),e=$("#dismiss-modal"),e.find(".company-name").text(g),e.find("textarea").val(""),e.find(".dismiss-btn").button("reset"),e.modal("show"),e.off(".rfpez-dismiss"),e.on("submit.rfpez-dismiss","form",function(c){return c.preventDefault(),$(this).find(".dismiss-btn").button("loading"),$.ajax({url:"/projects/"+f+"/bids/"+b+"/dismiss",data:{reason:e.find("select[name=reason]").val(),reason_other:e.find("input[name=reason_other]").val(),explanation:e.find("textarea[name=explanation]").val()},type:"GET",dataType:"json",success:function(b){var c;return e.modal("hide"),d.data("move-to-table")?(Rfpez.move_bid_selection("down"),a.remove(),c=$(b.html),$(".bids-table.dismissed-bids > thead").after(c)):window.location.reload()}})})}),$(document).on("click",".show-award-modal",function(){var a,b,c,d,e,f,g,h;return d=$(this),a=d.closest(".bid"),c=d.closest("[data-bid-id]"),f=c.data("project-id"),b=c.data("bid-id"),g=c.data("vendor-company-name"),h=c.data("vendor-email"),e=$("#award-modal"),e.find(".company-name").text(g),e.find(".vendor-email").html('<a href="mailto:'+h+'">'+h+"</a>"),e.find(".award-btn").button("reset"),e.modal("show"),e.off(".rfpez-award"),e.on("submit.rfpez-award","form",function(a){return a.preventDefault(),$(this).find(".award-btn").button("loading"),$.ajax({url:"/projects/"+f+"/bids/"+b+"/award",data:{awarded_message:e.find("textarea[name=awarded_message]").val()},type:"GET",dataType:"json",success:function(a){return"success"===a.status?(e.modal("hide"),window.location.reload()):void 0}})})}),$(document).on("click",".manual-awarded-message-checkbox",function(){var a,b,c;return b=$(this),c=$("#award-modal"),a=c.find(".awarded-message"),b.is(":checked")?a.data("original-val",a.val()).val("").attr("disabled",!0):a.val(a.data("original-val")).removeAttr("disabled")}),on_mouseover_select=!0,mouseover_select_timeout=!1,keep_bid_in_view=function(a,b){var c,d,e,f;return on_mouseover_select=!1,clearTimeout(mouseover_select_timeout),"bid"===b?(c=a.offset().top+a.height(),d=$(window).scrollTop()+$(window).height(),f=a.offset().top,e=$(window).scrollTop(),c>d&&$("html, body").scrollTop(c-$(window).height()),e>f&&$("html, body").scrollTop(a.offset().top)):"top"===b&&$("html, body").scrollTop(0),mouseover_select_timeout=setTimeout(function(){return on_mouseover_select=!0},200)},Rfpez.select_bid=function(a,b){return $(".bid").removeClass("selected"),a.addClass("selected"),b?keep_bid_in_view(a,b):void 0},Rfpez.move_bid_selection=function(a){var b,c,d,e,f;if(e=$(".bid.selected:eq(0)")){if(b=$(".bid"),f=b.index(e),"up"===a){if(0===f)return Rfpez.select_bid(e,"top");c=f-1}else c=f+1;return d=$(".bid:eq("+c+")"),d.length>0?Rfpez.select_bid(d,"bid"):void 0}},star_selection=function(){var a;return a=$(".bid.selected:eq(0)"),a.find(".star-td .btn:visible").click()},open_selection=function(){var a;return a=$(".bid.selected:eq(0)"),a.find("a[data-toggle=collapse]").click()},dismiss_selection=function(){var a;return a=$(".bid.selected:eq(0)"),a.find(".show-dismiss-modal, .undismiss-button").filter(":visible").click()},toggle_unread_selection=function(){var a;return a=$(".bid.selected:eq(0)"),a.find(".mark-as-read").is(":visible")?a.find(".mark-as-read").click():a.find(".mark-as-unread").click()},$(document).bind("keydown","k",function(){return Rfpez.move_bid_selection("up")}),$(document).bind("keydown","j",function(){return Rfpez.move_bid_selection("down")}),$(document).bind("keydown","s",star_selection),$(document).bind("keydown","return",open_selection),$(document).bind("keydown","o",open_selection),$(document).bind("keydown","d",dismiss_selection),$(document).bind("keydown","u",toggle_unread_selection),$(document).on("mouseover.selectbidmouseover",".bid",function(){return Rfpez.current_page("bid-review")&&on_mouseover_select?Rfpez.select_bid($(this),!1):void 0});